<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean name="paramManager" class="com.huiju.module.config.PrefixableParamManager">
    <property name="propertiesFile" value="jndi.properties" />
  </bean>

  <bean name="formatterFactory" class="com.huiju.module.context.ee.formatter.DefaultFormatterFactory" />

  <bean name="beanInterfaceResolver" class="com.huiju.module.context.ee.support.BeanInterfaceResolver">
    <property name="remoteClassSuffixes">
      <set>
        <value />
        <value>Remote</value>
      </set>
    </property>
    <property name="localClassSuffixes">
      <set>
        <value />
        <value>Local</value>
      </set>
    </property>
  </bean>

  <bean name="beanNameResolver" class="com.huiju.module.context.ee.support.BeanNameResolver">
    <property name="beanNameSuffixes">
      <set>
        <value />
        <value>Bean</value>
      </set>
    </property>
    <property name="interfaceSuffixes">
      <set>
        <value />
        <value>Remote</value>
        <value>Local</value>
      </set>
    </property>
  </bean>

  <bean name="jndiFormatter" class=" com.huiju.module.context.ee.formatter.PatternJndiFormatter">
    <property name="formatterFactory" ref="formatterFactory" />
    <property name="patterns">
      <list>
        <value>beanName:separator:beanInterface</value>
        <value>globalNamespace:beanName:separator:beanInterface</value>
      </list>
    </property>
    <property name="separators">
      <list>
        <value>!</value>
        <value>#</value>
      </list>
    </property>
  </bean>

  <bean name="beanResolver " class="com.huiju.module.context.ee.support.ConfigurableBeanResolver">
    <property name="jndiFormatter" ref="jndiFormatter" />
    <property name="beanInterfaceResolver" ref="beanInterfaceResolver" />
    <property name="beanNameResolver" ref="beanNameResolver" />
    <property name="jndiAttributes">
      <list>
        <value>lookup</value>
        <value>jndiname</value>
      </list>
    </property>
    <property name="beanInterfaceAttributes">
      <list>
        <value>beanInterface</value>
      </list>
    </property>
    <property name="beanNameAttributes">
      <list>
        <value>name</value>
        <value>mappedName</value>
      </list>
    </property>
  </bean>

  <bean name="beanFactory" class="com.huiju.module.context.ee.support.EJBBeanFactoryImpl">
    <property name="beanResolver" ref="beanResolver" />
  </bean>

</beans>
